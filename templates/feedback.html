{% extends "base.html" %}

{% block title %}Interview Feedback{% endblock %}

{% block extra_css %}
<style>
    .score-container {
        text-align: center;
        margin-bottom: 2rem;
    }
    
    .score-circle {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background-color: #f8f9fa;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin: 0 auto 1rem;
        border: 8px solid #0d6efd;
    }
    
    .score-value {
        font-size: 2.5rem;
        font-weight: bold;
        line-height: 1;
    }
    
    .score-label {
        font-size: 0.9rem;
        color: #6c757d;
    }
    
    .feedback-section {
        margin-bottom: 3rem;
    }
    
    .feedback-card {
        transition: transform 0.3s;
    }
    
    .feedback-card:hover {
        transform: translateY(-5px);
    }
    
    .strength {
        border-left: 5px solid #198754;
    }
    
    .improvement {
        border-left: 5px solid #dc3545;
    }
    
    .chart-container {
        height: 300px;
    }
    
    .question-row {
        border-left: 5px solid #dee2e6;
        padding-left: 1rem;
        margin-bottom: 1.5rem;
        transition: border-color 0.3s;
    }
    
    .question-row:hover {
        border-left-color: #0d6efd;
    }
    
    .question-text {
        font-weight: 500;
        margin-bottom: 0.5rem;
    }
    
    .answer-text {
        margin-bottom: 0.5rem;
        color: #6c757d;
    }
    
    .feedback-text {
        font-style: italic;
    }
    
    .metric-card {
        height: 100%;
    }
    
    .metric-icon {
        font-size: 2rem;
        margin-bottom: 1rem;
    }
    
    .metric-title {
        font-size: 1.1rem;
        font-weight: 500;
    }
    
    .metric-value {
        font-size: 2rem;
        font-weight: bold;
    }
    
    .metric-description {
        font-size: 0.9rem;
        color: #6c757d;
    }
</style>
{% endblock %}

{% block content %}
<div class="row align-items-center mb-5">
    <div class="col-md-8">
        <h1 class="display-5 fw-bold">Your Interview Feedback</h1>
        <p class="lead">Here's a comprehensive analysis of your interview performance.</p>
    </div>
    <div class="col-md-4 text-md-end">
        <a href="/interview" class="btn btn-primary me-2">Try Again</a>
        <a href="#" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#shareModal">Share Results</a>
    </div>
</div>

<div class="row mb-5">
    <div class="col-md-4">
        <div class="card shadow-sm">
            <div class="card-body score-container">
                <div class="score-circle">
                    <div class="score-value">83</div>
                    <div class="score-label">OVERALL SCORE</div>
                </div>
                <h4>Good Performance!</h4>
                <p class="text-muted">Above average compared to others interviewing for this role.</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-8">
        <div class="card shadow-sm">
            <div class="card-body">
                <h3 class="mb-4">Performance Summary</h3>
                <p>You demonstrated strong technical knowledge and clear communication in your interview. Your answers were well-structured and showed good understanding of AWS cloud services. Here are the key highlights from your performance:</p>
                
                <div class="row g-4 mt-2">
                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm strength">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill text-success me-2" viewBox="0 0 16 16">
                                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                    </svg>
                                    Strengths
                                </h5>
                                <ul class="mt-3">
                                    <li>Excellent technical knowledge of AWS services</li>
                                    <li>Clear and concise communication</li>
                                    <li>Good examples from past experiences</li>
                                    <li>Structured problem-solving approach</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm improvement">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-circle-fill text-danger me-2" viewBox="0 0 16 16">
                                        <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"/>
                                    </svg>
                                    Areas for Improvement
                                </h5>
                                <ul class="mt-3">
                                    <li>Maintain more consistent eye contact</li>
                                    <li>Provide more metrics in your success stories</li>
                                    <li>Be more specific about your contributions</li>
                                    <li>Speak more confidently about challenges</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row g-4 mb-5">
    <div class="col-md-3">
        <div class="card shadow-sm metric-card">
            <div class="card-body text-center">
                <div class="metric-icon text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-chat-text" viewBox="0 0 16 16">
                        <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
                        <path d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8zm0 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5z"/>
                    </svg>
                </div>
                <div class="metric-title">Communication</div>
                <div class="metric-value">85%</div>
                <div class="metric-description">Your communication was clear and structured</div>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card shadow-sm metric-card">
            <div class="card-body text-center">
                <div class="metric-icon text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-lightbulb" viewBox="0 0 16 16">
                        <path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"/>
                    </svg>
                </div>
                <div class="metric-title">Technical Knowledge</div>
                <div class="metric-value">90%</div>
                <div class="metric-description">Excellent AWS services knowledge</div>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card shadow-sm metric-card">
            <div class="card-body text-center">
                <div class="metric-icon text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                        <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                        <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                    </svg>
                </div>
                <div class="metric-title">Eye Contact</div>
                <div class="metric-value">72%</div>
                <div class="metric-description">Good, but could be more consistent</div>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card shadow-sm metric-card">
            <div class="card-body text-center">
                <div class="metric-icon text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-stopwatch" viewBox="0 0 16 16">
                        <path d="M8.5 5.6a.5.5 0 1 0-1 0v2.9h-3a.5.5 0 0 0 0 1H8a.5.5 0 0 0 .5-.5V5.6z"/>
                        <path d="M6.5 1A.5.5 0 0 1 7 .5h2a.5.5 0 0 1 0 1v.57c1.36.196 2.594.78 3.584 1.64a.715.715 0 0 1 .012-.013l.354-.354-.354-.353a.5.5 0 0 1 .707-.708l1.414 1.415a.5.5 0 1 1-.707.707l-.353-.354-.354.354a.512.512 0 0 1-.013.012A7 7 0 1 1 7 2.071V1.5a.5.5 0 0 1-.5-.5zM8 3a6 6 0 1 0 .001 12A6 6 0 0 0 8 3z"/>
                    </svg>
                </div>
                <div class="metric-title">Response Time</div>
                <div class="metric-value">85%</div>
                <div class="metric-description">Well-paced, concise answers</div>
            </div>
        </div>
    </div>
</div>

<div class="row mb-5">
    <div class="col-12">
        <div class="card shadow-sm">
            <div class="card-body">
                <h3 class="mb-4">Question & Answer Analysis</h3>
                
                <div class="question-row">
                    <div class="question-text">Q: Could you tell me about your experience with cloud computing, particularly with AWS services?</div>
                    <div class="answer-text">A: I have experience with various AWS services including EC2, S3, Lambda, and API Gateway. I've deployed serverless applications using AWS SAM and worked with DynamoDB for NoSQL data storage.</div>
                    <div class="feedback-text">
                        <strong>Feedback:</strong> Good overview of your AWS experience, but could be more specific about projects. Consider mentioning the scale or business impact of your work.
                    </div>
                    <div class="mt-2">
                        <span class="badge bg-success me-2">Technical Accuracy</span>
                        <span class="badge bg-warning text-dark">Specificity</span>
                    </div>
                </div>
                
                <div class="question-row">
                    <div class="question-text">Q: Can you describe a specific project where you used these AWS services? What challenges did you face and how did you overcome them?</div>
                    <div class="answer-text">A: I worked on a project where we built a serverless API using Lambda and API Gateway. We stored user data in DynamoDB and used S3 for file storage. One challenge was handling the cold start times of Lambda functions, which we resolved by using provisioned concurrency for critical endpoints. Another issue was optimizing DynamoDB costs, which we addressed by carefully designing our partition keys and implementing a caching layer.</div>
                    <div class="feedback-text">
                        <strong>Feedback:</strong> Excellent technical explanation showing problem-solving skills. You clearly articulated the challenges and solutions. Consider quantifying the impact (e.g., improvement in response times or cost savings).
                    </div>
                    <div class="mt-2">
                        <span class="badge bg-success me-2">Problem Solving</span>
                        <span class="badge bg-success me-2">Technical Detail</span>
                        <span class="badge bg-warning text-dark">Quantification</span>
                    </div>
                </div>
                
                <div class="question-row">
                    <div class="question-text">Q: How would you design a scalable and resilient architecture for a high-traffic web application using AWS?</div>
                    <div class="answer-text">A: I would start with a multi-AZ setup using Application Load Balancer to distribute traffic across EC2 instances in an Auto Scaling Group. For the database, I'd use Amazon RDS with Multi-AZ deployment for high availability. To improve performance, I'd add Amazon ElastiCache for caching and CloudFront for content delivery. For resilience, I'd implement health checks and automatic recovery. The static assets would be stored in S3, and I'd use Route 53 for DNS management with health checks.</div>
                    <div class="feedback-text">
                        <strong>Feedback:</strong> Strong architectural knowledge demonstrated. Good attention to both scalability and resilience aspects. You could improve by discussing monitoring and observability aspects.
                    </div>
                    <div class="mt-2">
                        <span class="badge bg-success me-2">Architecture</span>
                        <span class="badge bg-success me-2">Best Practices</span>
                        <span class="badge bg-warning text-dark">Monitoring</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mb-5">
    <div class="col-md-6">
        <div class="card shadow-sm h-100">
            <div class="card-body">
                <h3 class="mb-4">Body Language Analysis</h3>
                <div class="chart-container">
                    <canvas id="bodyLanguageChart"></canvas>
                </div>
                <div class="mt-3">
                    <p>Your body language was generally positive, showing engagement and confidence. Consider maintaining more consistent eye contact and reducing fidgeting for an even stronger impression.</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card shadow-sm h-100">
            <div class="card-body">
                <h3 class="mb-4">Verbal Communication Analysis</h3>
                <div class="chart-container">
                    <canvas id="verbalChart"></canvas>
                </div>
                <div class="mt-3">
                    <p>Your speaking pace and clarity were excellent. You used appropriate technical terminology and maintained good energy throughout the interview. Consider reducing filler words like "um" and "you know" for even more polished delivery.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="text-center mb-5">
    <a href="/interview" class="btn btn-primary btn-lg me-3">Practice Again</a>
    <a href="#" class="btn btn-outline-primary btn-lg" data-bs-toggle="modal" data-bs-target="#downloadModal">Download Detailed Report</a>
</div>

<!-- Share Modal -->
<div class="modal fade" id="shareModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Share Your Results</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Share your interview results with others:</p>
                <div class="input-group mb-3">
                    <input type="text" class="form-control" value="https://ai-interview-prep.example.com/results/s83j2k" readonly aria-label="Share URL" title="Share URL">
                    <button class="btn btn-outline-secondary" type="button">Copy</button>
                </div>
                <div class="d-grid gap-2 mt-4">
                    <button class="btn btn-primary">Share via Email</button>
                    <button class="btn btn-outline-primary">Share with Recruiter</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Download Modal -->
<div class="modal fade" id="downloadModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Download Detailed Report</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Choose the format for your detailed interview feedback report:</p>
                <div class="d-grid gap-2">
                    <button class="btn btn-outline-primary">Download as PDF</button>
                    <button class="btn btn-outline-primary">Download as Word Document</button>
                    <button class="btn btn-outline-primary">Send to Email</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Body Language Chart
    const bodyLanguageCtx = document.getElementById('bodyLanguageChart').getContext('2d');
    const bodyLanguageChart = new Chart(bodyLanguageCtx, {
        type: 'radar',
        data: {
            labels: ['Eye Contact', 'Posture', 'Hand Gestures', 'Facial Expressions', 'Head Movement'],
            datasets: [{
                label: 'Your Performance',
                data: [72, 85, 78, 88, 82],
                backgroundColor: 'rgba(13, 110, 253, 0.2)',
                borderColor: 'rgba(13, 110, 253, 1)',
                borderWidth: 2,
                pointBackgroundColor: 'rgba(13, 110, 253, 1)'
            }, {
                label: 'Average Performance',
                data: [65, 70, 68, 72, 70],
                backgroundColor: 'rgba(173, 181, 189, 0.2)',
                borderColor: 'rgba(173, 181, 189, 1)',
                borderWidth: 2,
                pointBackgroundColor: 'rgba(173, 181, 189, 1)'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                r: {
                    angleLines: {
                        display: true
                    },
                    suggestedMin: 0,
                    suggestedMax: 100
                }
            }
        }
    });
    
    // Verbal Communication Chart
    const verbalCtx = document.getElementById('verbalChart').getContext('2d');
    const verbalChart = new Chart(verbalCtx, {
        type: 'radar',
        data: {
            labels: ['Clarity', 'Pace', 'Volume', 'Terminology', 'Conciseness', 'Filler Words'],
            datasets: [{
                label: 'Your Performance',
                data: [85, 90, 82, 92, 78, 68],
                backgroundColor: 'rgba(13, 110, 253, 0.2)',
                borderColor: 'rgba(13, 110, 253, 1)',
                borderWidth: 2,
                pointBackgroundColor: 'rgba(13, 110, 253, 1)'
            }, {
                label: 'Average Performance',
                data: [70, 75, 72, 68, 65, 60],
                backgroundColor: 'rgba(173, 181, 189, 0.2)',
                borderColor: 'rgba(173, 181, 189, 1)',
                borderWidth: 2,
                pointBackgroundColor: 'rgba(173, 181, 189, 1)'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                r: {
                    angleLines: {
                        display: true
                    },
                    suggestedMin: 0,
                    suggestedMax: 100
                }
            }
        }
    });
});
</script>
{% endblock %} 